# Задачник с командной работой - План разработки

## Ⅰ. Общая настройка и анализ
- [x] Проанализировать загруженную структуру проекта.
- [x] Изучить `schema.sql` для понимания структуры БД.
- [x] Изучить `db.php` для понимания подключения к БД.
- [in_progress] Просмотреть основные PHP файлы (`index.php`, `login.php`, `register.php`, `dashboard.php` и т.д.) для оценки текущего функционала.
- [ ] Просмотреть файлы в папке `api` для понимания логики бэкенда.
- [ ] Определить существующие ошибки и области для улучшения.

## Ⅱ. Основные функциональные требования

### 1. Работа с досками задач
- **Создание досок:**
    - [ ] Реализовать форму/интерфейс для создания новой доски (название, описание).
    - [ ] Реализовать логику PHP для сохранения новой доски в БД.
    - [ ] Добавить поле "тип_доступа" (публичная/приватная) в БД и в логику создания.
    - [ ] Связать создателя с приватной доской.
- **Управление досками:**
    - [ ] Реализовать интерфейс для редактирования названия и описания доски.
    - [ ] Реализовать логику PHP для обновления данных доски.
    - [ ] Реализовать функцию удаления доски (с подтверждением).
    - [ ] Реализовать интерфейс для добавления участников команды к доске.
    - [ ] Реализовать логику PHP для управления участниками доски.
- **Отображение досок:**
    - [ ] Отображать список доступных досок на `dashboard.php` или аналогичной странице.
    - [ ] Учитывать права доступа (публичные/приватные/участник).

### 2. Работа с карточками задач
- **Создание карточек:**
    - [ ] Реализовать интерфейс для добавления карточек на доску.
    - [ ] Поля карточки: Название, Описание, Статус ("В ожидании", "В работе", "Завершено"), Приоритет (низкий, средний, высокий), Дедлайн (необязательно).
    - [ ] Реализовать логику PHP для сохранения новой карточки в БД, связывая ее с доской.
- **Управление карточками:**
    - [ ] Реализовать перетаскивание карточек между статусами (если возможно с текущим стеком JS, или через кнопки/выпадающие списки).
    - [ ] Реализовать интерфейс для редактирования содержимого карточки.
    - [ ] Реализовать логику PHP для обновления данных карточки.
    - [ ] Реализовать функцию удаления карточки (с подтверждением).
- **Отображение карточек:**
    - [ ] Отображать карточки на соответствующей доске, сгруппированные по статусам.

### 3. Назначение задач участникам
- **Назначение задач:**
    - [ ] Реализовать функционал для Менеджера по назначению задачи конкретному участнику команды из списка участников доски.
    - [ ] Реализовать логику PHP для сохранения назначенного пользователя в БД для задачи.
- **Отображение назначенных задач:**
    - [ ] Пользователь должен видеть список задач, назначенных ему (например, на `dashboard.php` или отдельной странице "Мои задачи").
- **Уведомления (базовые):**
    - [ ] Реализовать уведомления в интерфейсе о новых назначениях (если возможно, обновление в реальном времени через JS polling или просто при загрузке страницы). Email уведомления выходят за рамки базовой реализации без дополнительных сервисов.

### 4. Отслеживание прогресса
- **Обновление статуса:**
    - [ ] Разработчик должен иметь возможность обновлять статус задачи.
- **Отображение в реальном времени (имитация):**
    - [ ] Участники доски видят изменения в статусах задач (при перезагрузке страницы или через AJAX-обновления, если реализуемо).
- **Процентный индикатор (дополнительно):**
    - [ ] Отображать прогресс выполнения задачи в виде процентного индикатора (0%, 50%, 100% в зависимости от статуса).

## Ⅲ. Роли пользователей
- **Аутентификация и авторизация:**
    - [ ] Проверить и доработать существующую систему регистрации (`register.php`) и входа (`login.php`).
    - [ ] Реализовать управление сессиями (`auth.php`, `logout.php`).
    - [ ] Добавить поле "роль" в таблицу пользователей (Пользователь, Менеджер, Разработчик).
- **Права доступа:**
    - **Пользователь:**
        - [ ] Может создавать доски и карточки.
        - [ ] Может просматривать назначенные ему задачи.
    - **Менеджер:**
        - [ ] Все права Пользователя.
        - [ ] Может назначать задачи участникам.
        - [ ] Может просматривать общий прогресс по доске.
    - **Разработчик:**
        - [ ] Все права Пользователя.
        - [ ] Может обновлять статус задачи.
        - [ ] Может просматривать назначенные ему задачи.
    - [ ] Реализовать проверку ролей и прав доступа в PHP скриптах для всех критических действий.

## IV. Улучшения и исправления
- [ ] Провести ревизию существующего JS кода (`app.js`, `tasks.js`, `theme.js`) на предмет ошибок и улучшений.
- [ ] Провести ревизию CSS (`style.css`, `theme.css`) для улучшения внешнего вида и адаптивности.
- [ ] Обеспечить консистентность кода.
- [ ] Проверить безопасность (например, защита от SQL-инъекций, XSS).
- [ ] Оптимизировать запросы к БД, где это возможно.

## V. Дополнительно (если останется время)
- [ ] Уведомления по email (требует настройки почтового сервера или стороннего сервиса).
- [ ] Более продвинутые AJAX взаимодействия для "реального времени".
